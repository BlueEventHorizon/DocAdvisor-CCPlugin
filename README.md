# Doc Advisor - Claude Code Plugin

AI-powered documentation management with auto-indexed Table of Contents (ToC) generation.

## Overview

Doc Advisor is a Claude Code plugin that automatically indexes your project documentation, enabling AI agents to quickly identify relevant documents for any task.

### Key Features

- **Automatic ToC Generation**: Analyzes document content and generates searchable structured indexes
- **Incremental Updates**: Processes only changed files using hash-based change detection
- **Parallel Processing**: Up to 5 concurrent subagents for faster document processing
- **Interruption Recovery**: Preserves completed work and supports resumption

## Installation

### From Marketplace (Recommended)

```
/plugin install doc-advisor
```

### From GitHub

```
/plugin install github:BlueEventHorizon/DocAdvisor-CCPlugin
```

### From Local Path

```
/plugin install /path/to/DocAdvisor-CCPlugin/plugin
```

## Setup

After installation, run the setup script to configure the plugin for your project's document directories.

### 1. Navigate to Plugin Directory

```bash
cd ~/.claude/plugins/doc-advisor  # Adjust path based on installation location
```

### 2. Run Setup Script

```bash
# Default settings (rules/, specs/)
./setup.sh

# Custom directories
./setup.sh --rules-dir docs/rules/ --specs-dir docs/specs/

# Show help
./setup.sh --help
```

### Setup Options

| Option | Description | Default |
|--------|-------------|---------|
| `--rules-dir <path>` | Development documentation directory | `rules/` |
| `--specs-dir <path>` | Requirements/design documents directory | `specs/` |

### 3. Initial ToC Generation

```bash
# Generate ToC for development documentation
/doc-advisor:create-rules_toc --full

# Generate ToC for requirements/design documents
/doc-advisor:create-specs_toc --full
```

## Usage

### ToC Generation Commands

```bash
# Development documentation (rules/)
/doc-advisor:create-rules_toc          # Incremental update (changed files only)
/doc-advisor:create-rules_toc --full   # Full rebuild

# Requirements/design documents (specs/)
/doc-advisor:create-specs_toc          # Incremental update
/doc-advisor:create-specs_toc --full   # Full rebuild
```

### Advisor Agents

Automatically identify documents needed for a task:

```
# Use with Task tool
Task(subagent_type: rules-advisor, prompt: "Identify documents needed for implementing user authentication")
Task(subagent_type: specs-advisor, prompt: "Find requirements for screen navigation")
```

### ID Generation (For New Documents)

```bash
# Get next sequential ID
skills/next-doc-id/scan_ids.sh SCR   # → SCR-016
skills/next-doc-id/scan_ids.sh DES   # → DES-042
```

## Directory Structure

```
plugin/
├── .claude-plugin/
│   └── plugin.json          # Plugin metadata
├── setup.sh                 # Setup script
├── templates/               # Templates with placeholders
│   ├── agents/
│   ├── commands/
│   └── skills/toc-common/
├── commands/                # Slash commands (generated by setup.sh)
├── agents/                  # Specialized agents (generated by setup.sh)
├── skills/                  # Utilities
│   ├── toc-common/          # Shared config and functions
│   ├── toc-docs/            # Format definitions
│   ├── merge-rules-toc/     # Rules merge processing
│   ├── merge-specs-toc/     # Specs merge processing
│   ├── create-toc-checksums/# Checksum generation
│   └── next-doc-id/         # ID generation
└── README.md
```

## Target Directories

### rules/ - Development Documentation

```
rules/
├── core/           # Architecture, coding standards
├── layer/          # Layer-specific rules
├── workflow/       # Workflow definitions
└── rules_toc.yaml  # Generated ToC
```

### specs/ - Requirements & Design Documents

```
specs/
├── {feature}/
│   ├── requirements/  # Requirements (APP-, SCR-, BL-, etc.)
│   └── design/        # Design documents (DES-)
└── specs_toc.yaml     # Generated ToC
```

## ID Prefixes

| Prefix | Category |
|--------|----------|
| APP- | Application requirements |
| SCR- | Screen requirements |
| CMP- | UI components |
| FNC- | Functional requirements |
| BL- | Business logic |
| NF- | Non-functional requirements |
| DM- | Data models |
| EXT- | External integrations |
| NAV- | Navigation |
| THEME- | Themes |
| DES- | Design documents |

## Configuration

Customize settings in `skills/toc-common/config.yaml` (generated by setup.sh):

```yaml
rules:
  root_dir: rules/
  patterns:
    target_glob: "**/*.md"
    exclude:
      - ".toc_work"
      - "rules_toc.yaml"

specs:
  root_dir: specs/
  patterns:
    target_dirs:
      - requirements
      - design

common:
  parallel:
    max_workers: 5
```

## Processing Modes

| Mode | Description |
|------|-------------|
| full | Scan all files and regenerate ToC |
| incremental | Process only changed files (SHA-256 hash detection) |
| continuation | Resume interrupted processing |

## Requirements

- Python 3 (standard library only, no pip dependencies)
- Claude Code 1.0.0 or higher

## License

MIT License
